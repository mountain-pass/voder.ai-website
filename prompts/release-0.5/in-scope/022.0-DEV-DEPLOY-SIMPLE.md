# DEV-DEPLOY-SIMPLE: Basic GitHub Actions Vercel Deployment

## Release Goal

_"Release 0.5: Problem Validation - Enable basic deployment capability"_

Implement the absolute simplest GitHub Actions deployment to Vercel that gets the site deployed. This establishes basic deployment capability that can be enhanced with quality gates and validation in future stories.

## How This Story Contributes

This story enables deployment of the voder.ai website by implementing the minimal viable deployment workflow. It gets changes from GitHub to production with the fewest possible steps, providing a foundation for future enhancements.

## User Story

So that I can deploy changes to production, as a developer, I want a GitHub Actions workflow that builds and deploys the site to Vercel when I push to main.

**INVEST Criteria Compliance**:

- **Independent**: ‚úÖ Can be implemented with existing Node.js and Vercel setup
- **Negotiable**: ‚úÖ Deployment trigger and build steps can be refined
- **Valuable**: ‚úÖ Enables basic deployment capability to get site live
- **Estimable**: ‚úÖ Clear scope - simple workflow with 4 basic steps
- **Small**: ‚úÖ MINIMAL - Just build and deploy, no quality gates
- **Testable**: ‚úÖ Success measured by successful deployment to production

## Acceptance Criteria

- [ ] **GitHub Actions Workflow**: `.github/workflows/deploy.yml` exists and runs
- [ ] **Build Process**: Workflow runs `npm run build` successfully
- [ ] **Vercel Deployment**: Deploy using `vercel --prod` command
- [ ] **Main Branch Trigger**: Workflow triggers only on push to main branch
- [ ] **Deployment Success**: Site accessible at production URL after workflow completes
- [ ] **Basic Error Handling**: Workflow fails gracefully if build or deploy fails
- [ ] **GitHub Actions Validation**: Use `gh` CLI to wait for and verify workflow completion
- [ ] **Vercel Deployment Validation**: Use `vercel` CLI to check deployment status and URL accessibility

## Requirements

### Minimal Deployment Pipeline

- **REQ-MAIN-TRIGGER**: Deploy only on push to main branch
- **REQ-NODE-SETUP**: Set up Node.js environment for build
- **REQ-DEPENDENCY-INSTALL**: Install npm dependencies
- **REQ-BUILD-STEP**: Run production build process
- **REQ-VERCEL-DEPLOY**: Deploy to Vercel using CLI

### Security Requirements

- **REQ-VERCEL-TOKEN**: Use GitHub secret for Vercel authentication
- **REQ-PRODUCTION-DEPLOY**: Use `--prod` flag for production deployment

### Validation Requirements

- **REQ-GITHUB-VALIDATION**: Use `gh` CLI to monitor workflow execution and verify completion
- **REQ-VERCEL-VALIDATION**: Use `vercel` CLI to verify deployment status and accessibility

## Implementation Approach

### Simple GitHub Actions Workflow

```yaml
name: Deploy to Production
on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'npm'
      - run: npm ci
      - run: npm run build
      - name: Deploy to Vercel
        id: deploy
        run: |
          DEPLOYMENT_URL=$(npx vercel --prod --token ${{ secrets.VERCEL_TOKEN }})
          echo "deployment_url=$DEPLOYMENT_URL" >> $GITHUB_OUTPUT
          echo "‚úÖ Deployment completed: $DEPLOYMENT_URL"
      - name: Verify Deployment
        run: |
          echo "üîç Verifying deployment status..."
          npx vercel ls --token ${{ secrets.VERCEL_TOKEN }} | head -5
          echo "‚úÖ Deployment verification completed"
```

### Required Setup

1. **Vercel Token**: Add `VERCEL_TOKEN` to GitHub repository secrets
2. **Vercel Project**: Ensure project is linked to Vercel account
3. **Build Script**: Verify `npm run build` works locally

## Dependencies

- 005.0-DEV-BUILD-VITE (requires working build process)
- Vercel account and project setup
- GitHub repository with Actions enabled

## Success Criteria

- ‚úÖ **Basic Deployment**: Push to main ‚Üí site updates on production URL
- ‚úÖ **Build Integration**: npm build process works in GitHub Actions
- ‚úÖ **Vercel Integration**: Vercel CLI deploys successfully from Actions
- ‚úÖ **Deployment Validation**: Vercel CLI verifies deployment status and accessibility
- ‚úÖ **Error Handling**: Workflow fails gracefully with clear error messages

## Out of Scope (Future Stories)

- **Quality Gates**: Linting, testing, type checking before deployment
- **Post-Deployment Validation**: Health checks and smoke tests
- **Rollback Capability**: Automatic rollback on deployment failure
- **Advanced Error Handling**: Detailed error reporting and notifications
- **Manual Triggers**: Workflow dispatch for manual deployments
- **Environment Variables**: Complex configuration management
- **Preview Deployments**: Branch-based preview environments

This story focuses solely on getting basic deployment working. Quality gates, validation, and rollback capabilities will be added in subsequent stories once the foundation is established.
