# PO-PROBLEM-MANAGEMENT: ITIL Problem Management Framework

## Release Goal

_"Release 1.0: MVP Problem Validation - Establish systematic ITIL problem management for production issue tracking and resolution"_

Create a comprehensive ITIL problem management system using structured problem documentation in the docs/problems folder, enabling systematic problem tracking, workaround implementation, root cause analysis, and resolution workflows to maintain service quality and prevent recurring incidents during production operations.

## How This Story Contributes

This story establishes the foundation for systematic problem management that prevents recurring incidents and maintains service quality. By implementing ITIL problem management practices, we can quickly implement workarounds to minimize business impact while systematically addressing root causes to prevent future occurrences, crucial for maintaining professional service delivery during MVP validation phase.

**Note: This is a process-only meta-story that requires no code implementation. The "implementation" consists entirely of establishing documentation standards, workflow guidelines, and process definitions.**

## User Story

So that I can maintain service quality and prevent recurring incidents while systematically addressing underlying issues, as a product owner, I want a structured ITIL problem management system that tracks problems from initial documentation through workaround implementation to final resolution.

**INVEST Criteria Compliance**:

- **Independent**: Problem management can be established independently of other systems
- **Negotiable**: Problem documentation format and workflow steps can be refined
- **Valuable**: Provides systematic incident prevention and service quality maintenance
- **Estimable**: Clear scope for establishing problem management documentation system
- **Small**: Can be completed through documentation templates and process definition
- **Testable**: Success measured by consistent problem tracking, workaround implementation, and resolution workflows

## Acceptance Criteria

- [ ] **Problem Documentation Template**: Standardized template for problem documentation in docs/problems/
- [ ] **Status Workflow**: Clear status progression (open → known-error → closed) with filename conventions
- [ ] **ITIL Process Implementation**: Full ITIL problem management process including:
  - Problem identification and documentation
  - Workaround implementation to limit impact
  - Root cause analysis and documentation
  - Story creation for permanent fixes (must adhere to INVEST criteria)
  - Resolution confirmation and closure
- [ ] **Filename Convention**: Problems follow `<problem-name>.<status>.md` format matching decisions pattern
- [ ] **Workaround Tracking**: Process for documenting and implementing quick workarounds
- [ ] **Root Cause Analysis**: Structured approach for identifying and documenting root causes
- [ ] **Failing Test Creation**: Process for creating tests that reproduce problems for validation
- [ ] **Test Management**: Process for skipping tests during workarounds and re-enabling for fixes
- [ ] **Story Integration**: Process for creating INVEST-compliant stories to fix root causes
- [ ] **Resolution Confirmation**: Process for confirming fixes and closing problems
- [ ] **Process Documentation**: Complete ITIL problem management workflow documented
- [ ] **Priority Matrix**: Impact × Likelihood priority matrix documented with clear scoring guidelines
- [ ] **Analytics Integration**: Process for using current analytics data to calculate affected user percentage for accurate impact assessment

## Requirements

### ITIL Problem Management Process

- **REQ-PROBLEM-IDENTIFICATION**: Clear process for identifying and documenting problems in docs/problems/
- **REQ-IMPACT-ASSESSMENT**: Assessment of business impact and urgency for prioritization
- **REQ-PRIORITY-CALCULATION**: Priority calculated using impact and likelihood matrix (High/Medium/Low × High/Medium/Low = Priority 1-9)
- **REQ-WORKAROUND-IMPLEMENTATION**: Quick workaround implementation to minimize business impact
- **REQ-ROOT-CAUSE-ANALYSIS**: Systematic root cause analysis using appropriate techniques (5 Whys, fishbone diagram, etc.)
- **REQ-FAILING-TEST-CREATION**: Create failing test that reproduces the problem when root cause is identified (99% of cases)
- **REQ-KNOWN-ERROR-TRANSITION**: Problems transition to "known-error" status when workaround is implemented, root cause is documented, and failing test is created

### Problem Documentation Standards

- **REQ-PROBLEM-TEMPLATE**: Standardized template for problem documentation including:
  - Problem description and symptoms
  - Business impact assessment (High/Medium/Low) based on analytics data showing affected user percentage
  - Likelihood of recurrence (High/Medium/Low)
  - Priority calculation (Impact × Likelihood = Priority 1-9)
  - Investigation notes and findings
  - **Failing test details**: Test location, type, reproduction steps, and skip status
  - Workaround implementation details
  - Root cause analysis
  - Resolution steps and confirmation
- **REQ-STATUS-PROGRESSION**: Clear status workflow: open → known-error → closed
- **REQ-FILENAME-CONVENTION**: Problems use `<problem-name>.<status>.md` format
- **REQ-CROSS-REFERENCES**: Links to related incidents, stories, and decisions

### Status Management

- **REQ-OPEN-STATUS**: Problems start in "open" status during initial investigation
- **REQ-KNOWN-ERROR-STATUS**: Problems move to "known-error" when:
  - Workaround is implemented and documented
  - Root cause is identified and documented
  - Permanent fix story is created (adhering to INVEST criteria)
- **REQ-CLOSED-STATUS**: Problems move to "closed" when:
  - Permanent fix is implemented
  - Fix is confirmed in production
  - Problem no longer occurs

### Story Integration Requirements

- **REQ-STORY-CREATION**: Known errors must have corresponding INVEST-compliant stories for permanent fixes
- **REQ-INVEST-ADHERENCE**: All problem-fix stories must strictly adhere to INVEST criteria:
  - **Independent**: Can be developed independently
  - **Negotiable**: Implementation details can be refined
  - **Valuable**: Delivers clear business value by preventing problem recurrence
  - **Estimable**: Scope is clear enough for development estimation
  - **Small**: Can be completed within reasonable timeframe
  - **Testable**: Success can be verified through problem non-recurrence
- **REQ-STORY-TRACEABILITY**: Clear traceability between problems and fixing stories

### Workaround Management

- **REQ-WORKAROUND-SPEED**: Workarounds prioritize speed of implementation over elegance
- **REQ-FEATURE-DISABLING**: Disabling problematic features is an acceptable and often the best workaround strategy while determining and solving root causes - service stability takes priority over feature availability
- **REQ-WORKAROUND-DOCUMENTATION**: All workarounds must be documented with:
  - Implementation steps
  - Limitations and side effects
  - Business impact of disabled features (if applicable)
  - User communication strategy (if features are disabled)
  - **Test management**: Which tests are skipped/disabled and coverage exclusions
  - Monitoring requirements
  - Rollback procedures if needed
- **REQ-WORKAROUND-MONITORING**: Ongoing monitoring to ensure workarounds remain effective

### Test-Driven Problem Resolution

- **REQ-FAILING-TEST-MANDATORY**: When root cause is identified (99% of cases), create a failing test that reproduces the problem
- **REQ-TEST-TYPE-SELECTION**: Choose appropriate test type based on problem:
  - **Unit Tests**: Logic errors, calculation issues, component behavior
  - **E2E Playwright Tests**: User interaction issues, visual problems, browser-specific bugs
  - **Integration Tests**: API issues, database problems, service communication
- **REQ-TEST-REPRODUCTION**: Failing test must:
  - Fail consistently when problem exists
  - Be specific enough to isolate the exact issue
  - Cover the problematic scenario completely
  - Include clear description explaining what problem it reproduces
- **REQ-WORKAROUND-TEST-MANAGEMENT**: When implementing workarounds:
  - **Skip/disable tests** when features are disabled as workaround
  - Use appropriate test framework skip mechanisms
  - **Exclude disabled code** from coverage reports to maintain accurate metrics
  - Document which tests are disabled and why
- **REQ-FIX-VALIDATION**: When implementing permanent fixes:
  - **Re-enable previously disabled tests**
  - Tests should pass, confirming problem resolution
  - Failing tests after fix indicate incomplete resolution
  - Update coverage reports to include previously excluded code

### Root Cause Analysis Framework

- **REQ-RCA-METHODOLOGY**: Structured root cause analysis using appropriate techniques:
  - 5 Whys for simple cause chains
  - Fishbone diagrams for complex multi-factor problems
  - Timeline analysis for sequence-dependent issues
- **REQ-RCA-DOCUMENTATION**: Root cause analysis must document:
  - Analysis methodology used
  - Evidence and data supporting conclusions
  - Contributing factors identified
  - Prevention strategies for permanent fix
  - **Failing test details**: Test location, type, and reproduction steps

### Priority Assessment Framework

- **REQ-IMPACT-LEVELS**: Business impact assessment using three levels with analytics-based user reach calculation:
  - **High (3)**: Significant user experience degradation affecting >70% of page views, or critical business impact
  - **Medium (2)**: Moderate user experience issues affecting 30-70% of page views, or functionality limitations
  - **Low (1)**: Minor cosmetic issues affecting <30% of page views, or edge case problems
- **REQ-ANALYTICS-IMPACT**: Impact assessment MUST use current analytics data to calculate affected user percentage (e.g., mobile-only problems use mobile page view percentage, mobile+tablet problems combine both percentages)
- **REQ-LIKELIHOOD-LEVELS**: Recurrence likelihood assessment using three levels:
  - **High (3)**: Problem occurs consistently or for majority of users/scenarios
  - **Medium (2)**: Problem occurs intermittently or for significant subset of users
  - **Low (1)**: Problem occurs rarely or under specific conditions
- **REQ-PRIORITY-MATRIX**: Priority calculated as Impact × Likelihood (1-9 scale):
  - **Priority 9 (High×High)**: Critical - immediate workaround required
  - **Priority 6 (High×Medium, Medium×High)**: High - workaround within 24 hours
  - **Priority 4 (High×Low, Medium×Medium, Low×High)**: Medium - workaround within week
  - **Priority 3 (Medium×Low, Low×Medium)**: Low - address in next sprint
  - **Priority 1 (Low×Low)**: Minimal - address when convenient

### Integration with Existing Systems

- **REQ-DECISION-INTEGRATION**: Problems reference relevant architectural decisions when applicable
- **REQ-STORY-INTEGRATION**: Problem resolution stories integrate with existing story management system
- **REQ-DEPENDENCY-TRACKING**: Problem resolution stories properly document dependencies

## Dependencies

- 001.0-PO-STORY-MANAGEMENT (requires story management framework for creating fix stories)
- 001.1-PO-DECISION-MANAGEMENT (may reference architectural decisions in problem analysis)
- 015.0-PO-ANALYTICS-PAGEVIEWS (requires analytics data for accurate impact assessment based on affected user percentage)

## Implementation Notes

### Problem Lifecycle

1. **Problem Identification**: Problem documented in `docs/problems/<name>.open.md`
2. **Initial Assessment**: Business impact and urgency assessed
3. **Root Cause Analysis**: Systematic investigation to identify underlying cause
4. **Failing Test Creation**: Create test that reproduces the problem (99% of cases)
5. **Workaround Implementation**: Quick fix implemented to minimize impact (including feature disabling when appropriate)
6. **Test Management**: Skip/disable tests if features are disabled; exclude from coverage
7. **Status Transition**: Problem moves to `<name>.known-error.md` when workaround, RCA, and failing test complete
8. **Story Creation**: INVEST-compliant story created for permanent fix
9. **Fix Implementation**: Story implemented through normal development process
10. **Test Re-enablement**: Re-enable previously failing tests to verify fix
11. **Resolution Confirmation**: Fix verified in production, tests pass, problem no longer occurs
12. **Closure**: Problem moves to `<name>.closed.md`

### Template Structure

Problems should include:

- **Problem Description**: Clear description of symptoms and impact
- **Business Impact**: Assessment of user/business impact (High/Medium/Low) with analytics data showing percentage of affected page views
- **Likelihood**: Assessment of recurrence probability (High/Medium/Low)
- **Priority**: Calculated priority (Impact × Likelihood = Priority 1-9, where High=3, Medium=2, Low=1)
- **Investigation Notes**: Findings from troubleshooting and analysis
- **Failing Test**: Test details (location, type, reproduction steps, current skip status)
- **Workaround**: Temporary solution implemented (may include feature disabling with user impact assessment and test management)
- **Root Cause Analysis**: Systematic analysis of underlying cause
- **Fix Story**: Reference to INVEST-compliant story for permanent fix
- **Resolution**: Confirmation of fix effectiveness, test re-enablement, and problem closure

### Analytics-Based Impact Assessment

Problems must use current analytics data to accurately assess impact:

**Examples**:

- **Mobile-only problem**: If 50% of page views are mobile → affects 50% of users
- **Mobile + Tablet problem**: If 50% mobile + 25% tablet → affects 75% of users
- **Desktop-only problem**: If 25% of page views are desktop → affects 25% of users
- **All devices problem**: Affects 100% of users regardless of device breakdown

**Impact Thresholds**:

- **High Impact (3)**: Problem affects >70% of page views
- **Medium Impact (2)**: Problem affects 30-70% of page views
- **Low Impact (1)**: Problem affects <30% of page views

**Data Sources**: Use current analytics from 015.0-PO-ANALYTICS-PAGEVIEWS implementation to get device/viewport breakdowns.

### Integration with Story Management

- Problem fix stories must follow existing story template structure
- Stories must include clear acceptance criteria for verifying problem resolution
- Dependencies must be properly documented and numbered
- Stories must be testable through problem non-recurrence verification

## Definition of Done

- [ ] Problem management process documented and accessible
- [ ] Problem template created and available for use
- [ ] Status workflow clearly defined and documented
- [ ] Integration with story management system established
- [ ] ITIL problem management principles properly implemented
- [ ] Team training completed on problem management process
- [ ] First problem successfully processed through complete lifecycle
- [ ] Process validated with stakeholders and development team
